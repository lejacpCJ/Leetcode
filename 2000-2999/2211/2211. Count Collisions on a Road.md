# 2211. Count Collisions on a Road

## Problem Info

- **Difficulty:** Medium
- **Topics:** Simulation, String
- [Link to the problem](https://leetcode.com/problems/count-collisions-on-a-road/)

## Description

You are given a 0-indexed string `directions` of length `n`, where each character is `'L'`, `'R'`, or `'S'` representing cars moving left, right, or staying still. Cars move at the same speed. When two cars moving in opposite directions collide, collisions increase by 2. When a moving car collides with a stationary car, collisions increase by 1. After a collision, involved cars become stationary.

Return the total number of collisions that will happen on the road.

## Examples

- Input: `directions = "RLRSLL"`
- Output: `5`
- Explanation:

  - Cars 0 and 1 collide (opposite directions): +2
  - Cars 2 and 3 collide (moving into stationary): +1
  - Cars 3 and 4 collide (moving into stationary): +1
  - Cars 4 and 5 collide (moving into stationary): +1
  - Total: 5

- Input: `directions = "LLRR"`
- Output: `0`
- Explanation: No cars collide.

## Constraints

- `1 <= directions.length <= 10^5`
- `directions[i]` is `'L'`, `'R'`, or `'S'`

---

## Solution

1. Iterate through the string, tracking the previous car's state and the number of consecutive right-moving cars.
2. When a left-moving car meets right-moving cars, count collisions accordingly.
3. When a moving car meets a stationary car, count collisions.
4. After a collision, cars become stationary.

**Complexity:**

- **Time:** O(n)
- **Space:** O(1)

**Python Code:**

```python
class Solution:
    def countCollisions(self, directions: str) -> int:
        ans = 0
        stack_len = 0
        prev = ""
        for dir in directions:
            if prev == "" and dir == "L":
                continue
            elif dir == "R":
                stack_len += 1
                prev = "R"
            elif dir == "L":
                if prev == "R":
                    ans += 1
                    ans += stack_len
                    stack_len = 0
                    prev = "S"
                elif prev == "S":
                    ans += 1
            else:
                if prev == "R":
                    ans += stack_len
                    stack_len = 0
                prev = "S"
        return ans
```
