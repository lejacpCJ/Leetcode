# 2110. Number of Smooth Descent Periods of a Stock

## Problem Info

- **Difficulty:** Medium
- **Topics:** Array, Math, Dynamic Programming
- [Link to the problem](https://leetcode.com/problems/number-of-smooth-descent-periods-of-a-stock/)

## Description

You are given an integer array `prices` representing the daily price history of a stock, where `prices[i]` is the stock price on the `i`th day.

A **smooth descent period** of a stock consists of one or more contiguous days such that the price on each day is lower than the price on the preceding day by exactly 1. The first day of the period is exempted from this rule.

Return the number of smooth descent periods.

## Examples

- **Example 1:**

  - Input: `prices = [3,2,1,4]`
  - Output: `7`
  - Explanation: There are 7 smooth descent periods: `[3]`, `[2]`, `[1]`, `[4]`, `[3,2]`, `[2,1]`, and `[3,2,1]`.

- **Example 2:**

  - Input: `prices = [8,6,7,7]`
  - Output: `4`
  - Explanation: There are 4 smooth descent periods: `[8]`, `[6]`, `[7]`, and `[7]`.

- **Example 3:**
  - Input: `prices = [1]`
  - Output: `1`
  - Explanation: There is 1 smooth descent period: `[1]`.

## Constraints

- `1 <= prices.length <= 10^5`
- `1 <= prices[i] <= 10^5`

---

## Solution

1. **Iterate through prices:** Track the length of the current smooth descent period.
2. **Count periods:** For each segment, the number of smooth descent periods is the sum of the first `k` natural numbers, where `k` is the length of the segment.
3. **Reset on break:** If the descent is broken, add the count for the segment and reset.

**Complexity:**

- **Time:** O(n), where n is the length of `prices`.
- **Space:** O(1), only constant extra space is used.

**Python Code:**

```python
from typing import List

class Solution:
    def getDescentPeriods(self, prices: List[int]) -> int:
        ans = 0
        n = len(prices)
        straight = 1
        for i in range(n - 1):
            if prices[i] - prices[i + 1] == 1:
                straight += 1
            else:
                ans += (straight + 1) * straight // 2
                straight = 1
        ans += (straight + 1) * straight // 2
        return ans
```
