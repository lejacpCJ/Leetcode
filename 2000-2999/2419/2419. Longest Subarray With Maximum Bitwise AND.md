# 2419. Longest Subarray With Maximum Bitwise AND

## Problem Info

- **Difficulty:** Medium
- **Topics:** Array, Bit Manipulation, Brainteaser
- [Link to the problem](https://leetcode.com/problems/longest-subarray-with-maximum-bitwise-and/)

## Description

You are given an integer array `nums` of size `n`.

Consider a non-empty subarray from `nums` that has the maximum possible bitwise AND.

In other words, let `k` be the maximum value of the bitwise AND of any subarray of `nums`. Then, only subarrays with a bitwise AND equal to `k` should be considered.

Return the length of the longest such subarray.

The bitwise AND of an array is the bitwise AND of all the numbers in it.

A subarray is a contiguous sequence of elements within an array.

## Example

**Example 1:**
Input: `nums = [1,2,3,3,2,2]`  
Output: `2`  
Explanation: The maximum possible bitwise AND of a subarray is 3. The longest subarray with that value is [3,3], so we return 2.

**Example 2:**
Input: `nums = [1,2,3,4]`  
Output: `1`  
Explanation: The maximum possible bitwise AND of a subarray is 4. The longest subarray with that value is [4], so we return 1.

## Constraints

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^6`

---

## Solution

**Steps:**

The key insight is that the bitwise AND of two different numbers is always strictly less than the maximum of those two numbers. This means the maximum possible bitwise AND of any subarray is simply the maximum element in the array, and we need to find the longest contiguous sequence of this maximum element.

1. **Find the maximum element**: 
   - The maximum possible bitwise AND equals `max(nums)`

2. **Find longest consecutive sequence**:
   - Iterate through the array and track consecutive occurrences of the maximum element
   - Keep track of the current sequence length and maximum sequence length seen so far

3. **Return the result**:
   - The answer is the length of the longest consecutive sequence of maximum elements


**Complexity:**  

- **Time:** O(n), single pass to find max + single pass to find longest sequence
- **Space:** O(1), only using constant extra space

**Python Code:**

```python
from typing import List

class Solution:
    def longestSubarray(self, nums: List[int]) -> int:
        # The maximum possible AND is the maximum element in the array
        max_val = max(nums)
        
        result = 0
        curr = 0
        
        # Find the longest consecutive sequence of max_val
        for num in nums:
            if num == max_val:
                curr += 1
                result = max(result, curr)
            else:
                curr = 0
        
        return result
```