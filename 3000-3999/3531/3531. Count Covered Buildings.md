# 3531. Count Covered Buildings

## Problem Info

- **Difficulty:** Medium
- **Topics:** Array, Hash Table, Sorting
- [Link to the problem](https://leetcode.com/problems/count-covered-buildings/)

## Description

You are given a positive integer `n`, representing an `n x n` city. You are also given a 2D grid `buildings`, where `buildings[i] = [x, y]` denotes a unique building located at coordinates `[x, y]`.

A building is **covered** if there is at least one building in all four directions: left, right, above, and below.

Return the number of covered buildings.

## Examples

### Example 1

```
Input: n = 3, buildings = [[1,2],[2,2],[3,2],[2,1],[2,3]]
Output: 1

Explanation:
Only building [2,2] is covered as it has at least one building:
- above ([1,2])
- below ([3,2])
- left ([2,1])
- right ([2,3])
Thus, the count of covered buildings is 1.
```

### Example 2

```
Input: n = 3, buildings = [[1,1],[1,2],[2,1],[2,2]]
Output: 0

Explanation:
No building has at least one building in all four directions.
```

### Example 3

```
Input: n = 5, buildings = [[1,3],[3,2],[3,3],[3,5],[5,3]]
Output: 1

Explanation:
Only building [3,3] is covered as it has at least one building:
- above ([1,3])
- below ([5,3])
- left ([3,2])
- right ([3,5])
Thus, the count of covered buildings is 1.
```

## Constraints

- `2 <= n <= 10^5`
- `1 <= buildings.length <= 10^5`
- `buildings[i] = [x, y]`
- `1 <= x, y <= n`
- All coordinates of buildings are unique.

---

## Solution

1. **Group by rows and columns:**  
   For each building, store all y-coordinates for each x (row), and all x-coordinates for each y (column).

2. **Sort the coordinates:**  
   This allows quick determination of the minimum and maximum for each row and column.

3. **Check coverage:**  
   For each building, check if there is a building to its left and right (in the same row), and above and below (in the same column).

4. **Count covered buildings:**  
   Increment the count if both conditions are satisfied.

**Complexity:**

- **Time:** O(N log N), where N is the number of buildings (due to sorting).
- **Space:** O(N), for storing row and column mappings.

**Python Code:**

```python
from typing import List
from collections import defaultdict

class Solution:
    def countCoveredBuildings(self, n: int, buildings: List[List[int]]) -> int:
        x_dict = defaultdict(list)
        y_dict = defaultdict(list)
        buildings.sort()
        for x, y in buildings:
            x_dict[x].append(y)
            y_dict[y].append(x)
        ans = 0
        for x, y in buildings:
            x_covered = x > y_dict[y][0] and x < y_dict[y][-1]
            y_covered = y > x_dict[x][0] and y < x_dict[x][-1]
            if x_covered and y_covered:
                ans += 1
        return ans
```
