# 3100. Water Bottles II

## Problem Info

- **Difficulty:** Medium
- **Topics:** Math, Simulation
- [Link to the problem](https://leetcode.com/problems/water-bottles-ii/)

## Description

You are given two integers `numBottles` and `numExchange`.

- `numBottles` is the number of full water bottles you start with.
- In each operation, you can:
  - Drink any number of full water bottles, turning them into empty bottles.
  - Exchange `numExchange` empty bottles for one full water bottle. After each exchange, increase `numExchange` by one.
- You cannot exchange multiple batches for the same value of `numExchange`.

Return the maximum number of water bottles you can drink.

## Examples

### Example 1

- **Input:** `numBottles = 13`, `numExchange = 6`
- **Output:** `15`
- **Explanation:** You drink 13 bottles, exchange 6 empty for 1 full (now 8 empty, `numExchange` becomes 7), drink 1 more, exchange 7 empty for 1 full (now 2 empty, `numExchange` becomes 8), drink 1 more. Total: 15.

### Example 2

- **Input:** `numBottles = 10`, `numExchange = 3`
- **Output:** `13`
- **Explanation:** You drink 10 bottles, exchange 3 empty for 1 full (now 8 empty, `numExchange` becomes 4), drink 1 more, exchange 4 empty for 1 full (now 5 empty, `numExchange` becomes 5), drink 1 more, exchange 5 empty for 1 full (now 1 empty, `numExchange` becomes 6), drink 1 more. Total: 13.

## Constraints

- `1 <= numBottles <= 100`
- `1 <= numExchange <= 100`

---

## Solution

1. Drink all available full bottles, collecting empty bottles.
2. While you have enough empty bottles to exchange, trade them for a new full bottle and increase `numExchange` by 1.
3. Repeat until you cannot exchange anymore.

**Complexity:**

- **Time:** O(numBottles + numExchange)
- **Space:** O(1)

**Python Code:**

```python
class Solution:
    def maxBottlesDrunk(self, numBottles: int, numExchange: int) -> int:
        numEmpty = 0
        res = 0
        while numBottles > 0:
            res += numBottles
            numEmpty += numBottles
            numBottles = 0
            while numEmpty >= numExchange:
                numBottles += 1
                numEmpty -= numExchange
                numExchange += 1
        return res
```
