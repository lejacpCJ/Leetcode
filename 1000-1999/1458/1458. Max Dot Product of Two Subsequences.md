# 1458. Max Dot Product of Two Subsequences

## Problem Info

- **Difficulty:** Hard
- **Topics:** Array, Dynamic Programming
- [Link to the problem](https://leetcode.com/problems/max-dot-product-of-two-subsequences/)

## Description

Given two arrays `nums1` and `nums2`, return the maximum dot product between non-empty subsequences of `nums1` and `nums2` with the same length.

A subsequence of an array is a new array formed from the original array by deleting some (can be none) of the elements without disturbing the relative positions of the remaining elements.

## Examples

- **Example 1:**

  - Input: `nums1 = [2,1,-2,5]`, `nums2 = [3,0,-6]`
  - Output: `18`
  - Explanation: Take subsequence `[2,-2]` from `nums1` and `[3,-6]` from `nums2`. Their dot product is `(2*3 + (-2)*(-6)) = 18`.

- **Example 2:**

  - Input: `nums1 = [3,-2]`, `nums2 = [2,-6,7]`
  - Output: `21`
  - Explanation: Take subsequence `[3]` from `nums1` and `[7]` from `nums2`. Their dot product is `(3*7) = 21`.

- **Example 3:**
  - Input: `nums1 = [-1,-1]`, `nums2 = [1,1]`
  - Output: `-1`
  - Explanation: Take subsequence `[-1]` from `nums1` and `[1]` from `nums2`. Their dot product is `-1`.

## Constraints

- `1 <= nums1.length, nums2.length <= 500`
- `-1000 <= nums1[i], nums2[i] <= 1000`

---

## Solution

1. **Dynamic Programming Table:**  
   Let `f[i][j]` be the maximum dot product for the first `i` elements of `nums1` and the first `j` elements of `nums2`.

2. **Transition:**  
   For each pair `(i, j)`, consider:

   - Skipping `nums1[i-1]` or `nums2[j-1]`
   - Taking both and adding their product to the best previous result (or starting a new subsequence with just this pair)

3. **Initialization:**  
   Initialize `f` with `-inf` to ensure we always take at least one pair.

4. **Result:**  
   The answer is `f[m][n]` where `m` and `n` are the lengths of `nums1` and `nums2`.

**Complexity:**

- **Time:** O(m \* n)
- **Space:** O(m \* n)

**Python Code:**

```python
from typing import List

class Solution:
    def maxDotProduct(self, nums1: List[int], nums2: List[int]) -> int:
        m, n = len(nums1), len(nums2)
        f = [[float('-inf')] * (n + 1) for _ in range(m + 1)]
        for i, x in enumerate(nums1, 1):
            for j, y in enumerate(nums2, 1):
                v = x * y
                f[i][j] = max(
                    f[i - 1][j],           # skip nums1[i-1]
                    f[i][j - 1],           # skip nums2[j-1]
                    max(0, f[i - 1][j - 1]) + v  # take both, or start new
                )
        return f[m][n]
```
