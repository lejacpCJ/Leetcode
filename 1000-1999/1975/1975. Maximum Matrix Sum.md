# 1975. Maximum Matrix Sum

## Problem Info

- **Difficulty:** Medium
- **Topics:** Array, Greedy, Matrix
- [Link to the problem](https://leetcode.com/problems/maximum-matrix-sum/)

## Description

You are given an n x n integer matrix. You can do the following operation any number of times:

- Choose any two adjacent elements of the matrix and multiply each of them by -1.
- Two elements are considered adjacent if and only if they share a border.

Your goal is to maximize the summation of the matrix's elements. Return the maximum sum of the matrix's elements using the operation mentioned above.

## Examples

- **Input:** `matrix = [[1,-1],[-1,1]]`  
  **Output:** `4`  
  **Explanation:**  
  We can follow the following steps to reach sum equals 4:

  - Multiply the 2 elements in the first row by -1.
  - Multiply the 2 elements in the first column by -1.

- **Input:** `matrix = [[1,2,3],[-1,-2,-3],[1,2,3]]`  
  **Output:** `16`  
  **Explanation:**  
  We can follow the following step to reach sum equals 16:
  - Multiply the 2 last elements in the second row by -1.

## Constraints

- `n == matrix.length == matrix[i].length`
- `2 <= n <= 250`
- `-10^5 <= matrix[i][j] <= 10^5`

---

## Solution

1. **Observation:**  
   The operation allows us to flip the sign of any pair of adjacent elements. By repeating such operations, we can make all but possibly one element positive (if the total number of negative elements is odd).

2. **Approach:**
   - Compute the sum of absolute values of all elements.
   - Count the number of negative elements.
   - Track the minimum absolute value in the matrix.
   - If the number of negative elements is even, all elements can be made positive.
   - If odd, one element must remain negative (the one with the smallest absolute value).

**Complexity:**

- **Time:** O(nÂ²), n as the size of the matrix.
- **Space:** O(1)

**Python Code:**

```python
from typing import List

class Solution:
    def maxMatrixSum(self, matrix: List[List[int]]) -> int:
        min_abs = float('inf')
        neg_count = 0
        total = 0
        n = len(matrix)
        for i in range(n):
            for j in range(n):
                val = matrix[i][j]
                abs_val = abs(val)
                min_abs = min(min_abs, abs_val)
                if val < 0:
                    neg_count += 1
                total += abs_val
        if neg_count % 2 == 0:
            return total
        return total - 2 * min_abs
```
